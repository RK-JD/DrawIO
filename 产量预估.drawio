<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36" version="24.7.7">
  <diagram name="第 1 页" id="k5yTiqKiM7KxolQvgu_R">
    <mxGraphModel dx="2281" dy="1226" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="CCDwiHsNsHK28pe2jVji-4" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="455" y="196" width="588" height="629" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-19" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="10" y="-20" width="370" height="120" as="geometry" />
        </mxCell>
        <mxCell id="XywxlG7MxDHmHPa6fk5y-3" value="" style="rounded=1;whiteSpace=wrap;html=1;glass=0;shadow=0;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="780" y="420" width="240" height="310" as="geometry" />
        </mxCell>
        <mxCell id="XywxlG7MxDHmHPa6fk5y-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="XywxlG7MxDHmHPa6fk5y-5" target="XywxlG7MxDHmHPa6fk5y-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="XywxlG7MxDHmHPa6fk5y-5" value="" style="rounded=1;whiteSpace=wrap;html=1;glass=0;perimeterSpacing=0;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="790" y="600" width="220" height="110" as="geometry" />
        </mxCell>
        <mxCell id="k6Vo8XJsOw7zzvh53n1a-1" value="&lt;b&gt;&lt;font style=&quot;font-size: 15px;&quot;&gt;addTask&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 15px;&quot;&gt;(farmId,稻作类型)&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="-180" y="330" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k6Vo8XJsOw7zzvh53n1a-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="k6Vo8XJsOw7zzvh53n1a-2" target="k6Vo8XJsOw7zzvh53n1a-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CCDwiHsNsHK28pe2jVji-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="k6Vo8XJsOw7zzvh53n1a-2" target="XywxlG7MxDHmHPa6fk5y-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k6Vo8XJsOw7zzvh53n1a-2" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;yeidprediction&lt;/font&gt;&lt;/b&gt;(farmIds,&lt;div&gt;稻作类型sowtype,&lt;/div&gt;&lt;div&gt;长势任务类型，&lt;/div&gt;&lt;div&gt;imageTime，&lt;/div&gt;&lt;div&gt;imageType，&lt;/div&gt;&lt;div&gt;plantSeasonIds)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;gradientColor=#ea6b66;" parent="1" vertex="1">
          <mxGeometry x="130" y="370" width="270" height="100" as="geometry" />
        </mxCell>
        <mxCell id="k6Vo8XJsOw7zzvh53n1a-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="k6Vo8XJsOw7zzvh53n1a-4" target="k6Vo8XJsOw7zzvh53n1a-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k6Vo8XJsOw7zzvh53n1a-4" value="&lt;b&gt;校验&lt;/b&gt;&lt;br&gt;是否已经存在三期遥感影像" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="513" y="390" width="191" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k6Vo8XJsOw7zzvh53n1a-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="k6Vo8XJsOw7zzvh53n1a-6" target="k6Vo8XJsOw7zzvh53n1a-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k6Vo8XJsOw7zzvh53n1a-6" value="&lt;b&gt;Select&lt;/b&gt;&lt;br&gt;通过farmId找到发布成功(&lt;i&gt;&lt;font color=&quot;#c800ff&quot;&gt;PUBLISHED&lt;/font&gt;&lt;/i&gt;)的长势任务" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="800" y="220" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="k6Vo8XJsOw7zzvh53n1a-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="k6Vo8XJsOw7zzvh53n1a-10" target="k6Vo8XJsOw7zzvh53n1a-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k6Vo8XJsOw7zzvh53n1a-10" value="&lt;b&gt;Select&lt;/b&gt;&lt;br&gt;通过上述长势任务的RemoteImageId，找到遥感影像" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="800" y="290" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="k6Vo8XJsOw7zzvh53n1a-11" value="此处要根据imageTime和&lt;br&gt;imageType做筛选，组织成&lt;br&gt;&lt;div&gt;&lt;font style=&quot;font-style: normal;&quot;&gt;remoteImageMap(id,image)&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="1007" y="285" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k6Vo8XJsOw7zzvh53n1a-13" value="verificationProcesses vps" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1005" y="226" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k6Vo8XJsOw7zzvh53n1a-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="k6Vo8XJsOw7zzvh53n1a-14" target="k6Vo8XJsOw7zzvh53n1a-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k6Vo8XJsOw7zzvh53n1a-14" value="&lt;b&gt;Filter 合法遥感影像&lt;/b&gt;&lt;br&gt;根据筛选完的remoteImagMap,反向筛选vps,剔除无对应影像的vp" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="800" y="360" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="k6Vo8XJsOw7zzvh53n1a-16" value="把筛选完的vps，&lt;div&gt;按照Map(farmId,list&amp;lt;vp&amp;gt;)组织为&lt;br&gt;processFarmGroup pfg&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1019" y="359" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k6Vo8XJsOw7zzvh53n1a-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="k6Vo8XJsOw7zzvh53n1a-17" target="k6Vo8XJsOw7zzvh53n1a-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k6Vo8XJsOw7zzvh53n1a-17" value="&lt;b&gt;遍历&lt;/b&gt;plantSeasonIds&lt;br&gt;根据plantSeasonIds,查有效的种植季，传null则直接用pfg的keySet" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="800" y="430" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="XywxlG7MxDHmHPa6fk5y-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="k6Vo8XJsOw7zzvh53n1a-20" target="EAVZWAEJz5FC2BpZX5lk-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k6Vo8XJsOw7zzvh53n1a-20" value="&lt;b&gt;Sort 稻作类型&lt;/b&gt;&lt;br&gt;遍历pss,不符合sowtype废弃；长势影像不足3期废弃；&lt;div&gt;同时以plantSeason的farmId在pfg中取出farmProcessGroup 这实际是长势影像，按条件筛选并排序成新的fpg&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="800" y="495" width="200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="k6Vo8XJsOw7zzvh53n1a-22" value="plantSeasons pss" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1025" y="440" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EAVZWAEJz5FC2BpZX5lk-1" value="&lt;b&gt;遍历 fpg&lt;/b&gt;&lt;br&gt;&lt;div&gt;yieldProcess存储vp&lt;br&gt;&lt;font size=&quot;1&quot;&gt;&lt;span style=&quot;font-size: 10px;&quot;&gt;未达到&lt;/span&gt;&lt;i style=&quot;color: rgb(212, 0, 255); font-size: 10px;&quot;&gt;SCOUNT&lt;/i&gt;&lt;span style=&quot;font-size: 10px;&quot;&gt;，则装入&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;yieldProcess&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="800" y="620" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="XywxlG7MxDHmHPa6fk5y-2" value="&lt;div&gt;&lt;b&gt;满足count==3的要求&lt;/b&gt;&lt;/div&gt;&lt;div&gt;装填&lt;span style=&quot;background-color: initial;&quot;&gt;saYieldPredictTasks&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;入库&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="800" y="740" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="XywxlG7MxDHmHPa6fk5y-4" value="若已到达count则break" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="835" y="680" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="XywxlG7MxDHmHPa6fk5y-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="XywxlG7MxDHmHPa6fk5y-2" target="XywxlG7MxDHmHPa6fk5y-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="XywxlG7MxDHmHPa6fk5y-9" value="适配：有手动和自动的切换&lt;div&gt;自动需要传入workID(工单号)&lt;/div&gt;&lt;div&gt;和plantSeasonId&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="455" y="520" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="CCDwiHsNsHK28pe2jVji-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="XywxlG7MxDHmHPa6fk5y-12" target="XywxlG7MxDHmHPa6fk5y-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="XywxlG7MxDHmHPa6fk5y-12" value="&lt;span style=&quot;text-wrap: nowrap; font-size: 13px;&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;callAutoPredictService&lt;/font&gt;&lt;/b&gt;(yieldPredictTasks,&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap; font-size: 13px;&quot;&gt;workIdProcessListMap,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap; font-size: 13px;&quot;&gt;PlantSeason)&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="130" y="530" width="270" height="100" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" parent="1" source="XywxlG7MxDHmHPa6fk5y-17" target="XywxlG7MxDHmHPa6fk5y-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="XywxlG7MxDHmHPa6fk5y-17" target="Lbo-__C76JFn3yMAQjEz-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="XywxlG7MxDHmHPa6fk5y-17" value="&lt;span style=&quot;font-size: 13px; text-wrap: nowrap;&quot;&gt;&lt;b&gt;gisApi.doRemoteAnalyse(growthAnalyseRequest)&lt;/b&gt;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: 13px; text-wrap: nowrap;&quot;&gt;&lt;b&gt;请求产量分析&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;gradientColor=#b3b3b3;" parent="1" vertex="1">
          <mxGeometry x="-252" y="553" width="330" height="70" as="geometry" />
        </mxCell>
        <mxCell id="XywxlG7MxDHmHPa6fk5y-19" value="&lt;span style=&quot;text-wrap: nowrap; font-size: 17px;&quot;&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;成功，&lt;/font&gt;&lt;/span&gt;&lt;div style=&quot;font-size: 17px;&quot;&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;设置&lt;/span&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;growthAnalyseRequest状态为&lt;/span&gt;&lt;/font&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;-1&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="130" y="730" width="270" height="100" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-3" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="10" y="110" width="370" height="210" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Lbo-__C76JFn3yMAQjEz-2" target="k6Vo8XJsOw7zzvh53n1a-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-2" value="&lt;span style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;judgeAndCallYieldTask&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 15px;&quot;&gt;(VerificationProcess)&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="175" y="240" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-4" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;RemoteImage&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ServiceImpl&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-20" y="190" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Lbo-__C76JFn3yMAQjEz-7" target="Lbo-__C76JFn3yMAQjEz-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-7" value="&lt;span style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;saveGrowthAppendInfo&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 15px;&quot;&gt;(AnalyseResultDTO)&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="175" y="140" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Lbo-__C76JFn3yMAQjEz-10" target="Lbo-__C76JFn3yMAQjEz-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-10" value="&lt;span style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;saveGrowthAppendInfo&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 15px;&quot;&gt;(AnalyseResultDTO request)&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="175" y="10" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-12" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;RemoteImage&lt;/b&gt;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;Controller&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry y="25" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Lbo-__C76JFn3yMAQjEz-13" target="Lbo-__C76JFn3yMAQjEz-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-13" value="/saveGrowthAppendInfo" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="175" y="-120" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" parent="1" source="Lbo-__C76JFn3yMAQjEz-16" target="k6Vo8XJsOw7zzvh53n1a-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-16" value="&lt;span style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;callYieldTask(String farmId)&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 15px;&quot;&gt;(farmId)&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="-180" y="440" width="195" height="55" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.002;entryY=0.375;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="k6Vo8XJsOw7zzvh53n1a-1" target="k6Vo8XJsOw7zzvh53n1a-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Lbo-__C76JFn3yMAQjEz-20" target="k6Vo8XJsOw7zzvh53n1a-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-20" value="/yieldForecast/addTask" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-450" y="330" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Lbo-__C76JFn3yMAQjEz-22" target="Lbo-__C76JFn3yMAQjEz-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-22" value="/yieldForecast/initAutoTask" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-450" y="437.5" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.998;entryY=0.389;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="XywxlG7MxDHmHPa6fk5y-12" target="XywxlG7MxDHmHPa6fk5y-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-29" value="&lt;span style=&quot;font-size: 13px; text-wrap: nowrap;&quot;&gt;&lt;b&gt;saveTaskResult(AutotaskResultDTO)&lt;/b&gt;&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="-597" y="680" width="270" height="100" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-31" value="根据id找出发布成功的长势任务" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="1209" y="228" width="183" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-32" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;i&gt;Notice&lt;/i&gt;&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1270" y="183" width="61" height="29" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-33" value="根据长势任务vps对应的image_id&lt;div&gt;找出每一个任务对应的image集合（remoteImages）&lt;/div&gt;&lt;div&gt;(类型为imageType，时间要在imageDate之后)&lt;/div&gt;&lt;div&gt;按照&lt;span style=&quot;background-color: initial;&quot;&gt;(id,remoteImage)组织成Map&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;(这个Map中是合法Images)&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="1157" y="276" width="295" height="84" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-34" value="筛选vps，只有verificationProcess的&lt;div&gt;imageId存在于&lt;span style=&quot;background-color: initial;&quot;&gt;Map中，才保留，&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;也就是只保留图像合法的长势任务&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="1209" y="364" width="209" height="55" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-35" value="&lt;b&gt;遍历plantSeasons&lt;/b&gt;，pss是根据&lt;div&gt;yieldPrediction传入的plantSeasonIds&lt;span style=&quot;background-color: initial;&quot;&gt;查表得到，&lt;/span&gt;&lt;div&gt;如果没传入：直接采用vps的所有关联农场id&lt;/div&gt;&lt;/div&gt;&lt;div&gt;查找其各自的种植季，即全量查找&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="1177" y="423" width="275" height="70" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-36" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1440" y="467.5" as="sourcePoint" />
            <mxPoint x="1523" y="467.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-38" value="pss空" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="Lbo-__C76JFn3yMAQjEz-36" vertex="1" connectable="0">
          <mxGeometry x="-0.1081" y="1" relative="1" as="geometry">
            <mxPoint x="1" y="-14" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-37" value="没有有效种植季" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#1e942c;" parent="1" vertex="1">
          <mxGeometry x="1517" y="452.5" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-39" value="&lt;span style=&quot;text-wrap: wrap;&quot;&gt;&lt;i&gt;&lt;font color=&quot;#ff00f7&quot; style=&quot;font-size: 15px;&quot;&gt;&lt;b&gt;logger&lt;/b&gt;&lt;/font&gt;&lt;/i&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1535" y="180" width="64" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-45" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1438" y="351" as="sourcePoint" />
            <mxPoint x="1521" y="351" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-46" value="&lt;span style=&quot;color: rgba(0, 0, 0, 0); font-family: monospace; font-size: 0px; text-align: start;&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%22%22%20style%3D%22shape%3DflexArrow%3BendArrow%3Dclassic%3Bhtml%3D1%3Brounded%3D0%3B%22%20edge%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20width%3D%2250%22%20height%3D%2250%22%20relative%3D%221%22%20as%3D%22geometry%22%3E%3CmxPoint%20x%3D%221428%22%20y%3D%22503%22%20as%3D%22sourcePoint%22%2F%3E%3CmxPoint%20x%3D%221511%22%20y%3D%22503%22%20as%3D%22targetPoint%22%2F%3E%3C%2FmxGeometry%3E%3C%2FmxCell%3E%3CmxCell%20id%3D%223%22%20value%3D%22pss%E7%A9%BA%22%20style%3D%22edgeLabel%3Bhtml%3D1%3Balign%3Dcenter%3BverticalAlign%3Dmiddle%3Bresizable%3D0%3Bpoints%3D%5B%5D%3B%22%20vertex%3D%221%22%20connectable%3D%220%22%20parent%3D%222%22%3E%3CmxGeometry%20x%3D%22-0.1081%22%20y%3D%221%22%20relative%3D%221%22%20as%3D%22geometry%22%3E%3CmxPoint%20as%3D%22offset%22%2F%3E%3C%2FmxGeometry%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E&lt;/span&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="Lbo-__C76JFn3yMAQjEz-45" vertex="1" connectable="0">
          <mxGeometry x="-0.1081" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-48" value="&lt;span style=&quot;font-size: 12px;&quot;&gt;remoteImages空&lt;/span&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="Lbo-__C76JFn3yMAQjEz-45" vertex="1" connectable="0">
          <mxGeometry x="-0.1637" y="3" relative="1" as="geometry">
            <mxPoint x="-20" y="-14" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-49" value="影像不存在" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#1e942c;" parent="1" vertex="1">
          <mxGeometry x="1499.5" y="338" width="135" height="32" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-50" value="发布成功长势任务不存在" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#1e992d;" parent="1" vertex="1">
          <mxGeometry x="1502" y="237" width="150" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-51" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1412" y="248" as="sourcePoint" />
            <mxPoint x="1495" y="248" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-52" value="&lt;span style=&quot;color: rgba(0, 0, 0, 0); font-family: monospace; font-size: 0px; text-align: start;&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%22%22%20style%3D%22shape%3DflexArrow%3BendArrow%3Dclassic%3Bhtml%3D1%3Brounded%3D0%3B%22%20edge%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20width%3D%2250%22%20height%3D%2250%22%20relative%3D%221%22%20as%3D%22geometry%22%3E%3CmxPoint%20x%3D%221428%22%20y%3D%22503%22%20as%3D%22sourcePoint%22%2F%3E%3CmxPoint%20x%3D%221511%22%20y%3D%22503%22%20as%3D%22targetPoint%22%2F%3E%3C%2FmxGeometry%3E%3C%2FmxCell%3E%3CmxCell%20id%3D%223%22%20value%3D%22pss%E7%A9%BA%22%20style%3D%22edgeLabel%3Bhtml%3D1%3Balign%3Dcenter%3BverticalAlign%3Dmiddle%3Bresizable%3D0%3Bpoints%3D%5B%5D%3B%22%20vertex%3D%221%22%20connectable%3D%220%22%20parent%3D%222%22%3E%3CmxGeometry%20x%3D%22-0.1081%22%20y%3D%221%22%20relative%3D%221%22%20as%3D%22geometry%22%3E%3CmxPoint%20as%3D%22offset%22%2F%3E%3C%2FmxGeometry%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E&lt;/span&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="Lbo-__C76JFn3yMAQjEz-51" vertex="1" connectable="0">
          <mxGeometry x="-0.1081" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-53" value="&lt;span style=&quot;font-size: 12px;&quot;&gt;vps&lt;/span&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;空&lt;/span&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="Lbo-__C76JFn3yMAQjEz-51" vertex="1" connectable="0">
          <mxGeometry x="-0.1637" y="3" relative="1" as="geometry">
            <mxPoint x="-8" y="-12" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-54" value="1.plantSeason的sowType不符合指定的sowType，剔除（&lt;span style=&quot;color: rgb(30, 148, 44); text-wrap: wrap;&quot;&gt;没有有效种植季&lt;/span&gt;）&lt;div&gt;2.查询种植季所属的农场，是否有三期长势影像（&lt;font color=&quot;#009900&quot;&gt;种植季期数不满足条件（小于3）！&lt;/font&gt;）这个条件实际上是一个必要条件，&lt;/div&gt;&lt;div&gt;农场的影像都不足3个，这个种植季怎么会有3期影像呢？&lt;/div&gt;&lt;div&gt;3.filter筛选，种植季不为空，且&lt;b&gt;种植季的id在这个长势影像所对应的种植季中&lt;/b&gt;，也就是根据长势影像，筛选合法的种植季&lt;/div&gt;&lt;div&gt;如果没传入PlantSeasonIds，这一个环节则不需要的，因为本就是按照vps长势任务关联农场生成的种植季&lt;/div&gt;&lt;div&gt;4.根据合法imageMap筛选，影像id存在于合法Map，且其创建时间不为空，则true&lt;font color=&quot;#f0bc00&quot;&gt;(脏数据)&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1027" y="491" width="659" height="98" as="geometry" />
        </mxCell>
        <mxCell id="Lbo-__C76JFn3yMAQjEz-60" value="至此，fpg中的影像完全与plantSeasonId有关联，遍历fpg，&lt;div&gt;有三个影像则装载&lt;/div&gt;&lt;div&gt;(vecificationProcess和image是一一对应关系，即生成的长势图像)&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1151.5" y="627.5" width="365" height="55" as="geometry" />
        </mxCell>
        <mxCell id="CCDwiHsNsHK28pe2jVji-1" value="每生成一期长势，&lt;div&gt;都会自动检测是否可以触发估产&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="380" y="25" width="133" height="30" as="geometry" />
        </mxCell>
        <mxCell id="peurCXsNEcaJijr6-GbO-1" value="1.分蘖期和抽穗期之间必须有三期图像&lt;div&gt;2.一个vp只对应一个image&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1004" y="-58" width="220" height="41" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
